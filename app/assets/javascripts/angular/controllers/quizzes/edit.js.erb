app.controller('QuizzesEditCtrl', ['$scope', '$http', '$routeParams', function($scope, $http, $routeParams){

  $http.get('/quizzes/' + $routeParams.id).success(function(response){
    console.log(response);
    $scope.quiz = response;

  });

  $scope.update= function(){
    // I added ng-model in edit.html to bind the description field.

    // Need to rename the 'questions' attribute to 'questions_attributes' to follow Rails convention
    var data = {
      name: $scope.quiz.name,
      description: $scope.quiz.description,
      questions_attributes: $scope.quiz.questions
    };

    console.log(data);

    $http.put('/quizzes/' + $routeParams.id, data).success(function(response){
      // Saved. But I am not doing anything interesting currently.
      console.log(response);
      $scope.quiz = response;
      // Alternatively, You can choose to redirect to another page if you like.
      //location = '/#/quizzes';
    });
  };

  $scope.create = function() {
    $scope.quiz.questions.push($scope.question);
  };

  $scope.delete = function(index) {
    $scope.quiz.questions[index]['_destroy'] = 1;  // Need a "truthy" value for Rails
  }
}]);